C51 COMPILER V9.52.0.0   LED                                                               08/08/2018 16:05:19 PAGE 1   


C51 COMPILER V9.52.0.0, COMPILATION OF MODULE LED
OBJECT MODULE PLACED IN Led.obj
COMPILER INVOKED BY: C:\Keil\C51\C51\BIN\C51.EXE UserAPP\Led.c OPTIMIZE(0,SPEED) BROWSE INCDIR(.\UserAPP) DEBUG OBJECTEX
                    -TEND PRINT(.\Led.lst) TABS(2) OBJECT(Led.obj)

line level    source

   1          /********************************************************************
   2            *
   3            * FILE NAME      Led.c
   4            *
   5          *********************************************************************/
   6          #include "Led.h"
   7          
   8          
   9          //Global arguments
  10          _Uint8    LedMode;
  11          bit       LedInit;
  12          
  13          
  14          //File arguments
  15          _TypeLed_U   xdata  LedData;
  16          bit       UpdateFlag;
  17          _Uint8    LedStep;
  18          _Uint8    LedTime;
  19          
  20          
  21          
  22          /**
  23            * Led_Updae
  24            *   > Update the led driver data
  25            *   > Led type: SK6812MINI-3535
  26            *   > 0: 0.3u + 0.9u    1: 0.9u + 0.3u
  27            */
  28          static void Led_Updae(void)
  29          {
  30   1        _uint8  bitCnt    = 0;
  31   1        _uint8  byteCnt   = 0;
  32   1        _uint8  tempBuf   = 0;
  33   1        _uint8  * pBuf    = 0;
  34   1      
  35   1        if (UpdateFlag == FALSE)    return;
  36   1        UpdateFlag = FALSE;
  37   1      
  38   1        pBuf = &LedData.SendBuf;
  39   1        for (byteCnt = 0;byteCnt < COLOR_TOTAL;byteCnt++){
  40   2          tempBuf = *pBuf;
  41   2          pBuf++;
  42   2          for (bitCnt = 0; bitCnt < 8; bitCnt++){
  43   3            if (tempBuf & 0x80 == 0x80){
  44   4              PORT_COMM = SET;
  45   4              ;;;;
  46   4              PORT_COMM = RESET;
  47   4              ;;;
  48   4            }
  49   3            else{
  50   4              PORT_COMM = SET;
  51   4              ;;;;;;;;;;;
  52   4              PORT_COMM = RESET;
  53   4            }
  54   3      
C51 COMPILER V9.52.0.0   LED                                                               08/08/2018 16:05:19 PAGE 2   

  55   3            tempBuf <<= 1;
  56   3          }
  57   2        }
  58   1      }
  59          
  60          /**
  61            * Led_Control
  62            *   > Control the led display mode
  63            */
  64          void Led_Control(void)
  65          {
  66   1        switch (LedMode){
  67   2          case LED_OFF:               Led_Off();              break;
  68   2          case LED_WIFI_STANDBY:      Wifi_Standby();         break;
  69   2          case LED_WIFI_CONNECTING:   Wifi_Connecting();      break;
  70   2          case LED_WIFI_CONNETED:     Wifi_Connected();       break;
  71   2          case LED_NORMAL:            Led_Normal();           break;
  72   2          case LED_ERROR:             Led_Err();              break;
  73   2        }
  74   1        
  75   1        Led_Updae();
  76   1      }
  77          
  78          /**
  79            * Led_Off
  80            */
  81          static void Led_Off(void)
  82          {
  83   1        _uint8  cnt = 0;
  84   1        if(LedInit == TRUE){
  85   2          LedInit = FALSE;
  86   2          for (cnt = 0; cnt < LED_TOTAL; cnt++){
  87   3            LedData.Buffer[cnt].DutyR = 0;
  88   3            LedData.Buffer[cnt].DutyG = 0;
  89   3            LedData.Buffer[cnt].DutyB = 0;
  90   3          }
  91   2        }
  92   1      }
  93          
  94          /**
  95            * Led_Normal
  96            */
  97          static void Led_Normal(void)
  98          {
  99   1        
 100   1      }
 101          
 102          /**
 103            * Led_Err
 104            */
 105          static void Led_Err(void)
 106          {
 107   1      
 108   1      }
 109          
 110          /**
 111            * Wifi_Standby
 112            */
 113          static void Wifi_Standby(void)
 114          {
 115   1      
 116   1      }
C51 COMPILER V9.52.0.0   LED                                                               08/08/2018 16:05:19 PAGE 3   

 117          
 118          /**
 119            * Wifi_Connected
 120            */
 121          static void Wifi_Connected(void)
 122          {
 123   1      
 124   1      }
 125          
 126          
 127          /**
 128            * Wifi_Connecting
 129            */
 130          static void Wifi_Connecting(void)
 131          {
 132   1      
 133   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    252    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =     30    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     10    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      2    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
